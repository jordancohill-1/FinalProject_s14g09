{% extends "layouts/default.html" %}

{% block content %}
<p>
  {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
    {% endif %}
  {% endwith %}
</p>
<div class="container">
  <div class="row">
    <div class="col">
      <h2>Upload Image</h2>
      <p>Test drive our algorithm by uploading your own image.</p>
      <form id="upload_form" action="/upload" method="POST" enctype="multipart/form-data">
        <div class="input-group mb-3">
          <div class="custom-file">
            <input type="file" name="image" class="custom-file-input" id="poster">
            <label id="posterLabel" class="custom-file-label" for="poster">upload poster...</label>
            <div id="file-upload-filename"></div>
          </div> 
        </div>
        <button type="submit" class="btn btn-primary">Upload poster</button>
      </form>
    </div>
  </div>
</div>
<script type="text/javascript">
  var input = document.getElementById( 'poster' );
var infoArea = document.getElementById( 'posterLabel' );

input.addEventListener( 'change', showFileName );

function showFileName( event ) {
  
  var input = event.srcElement;

  var fileName = input.files[0].name;

  infoArea.textContent = fileName;
}
</script>
{% endblock %}
